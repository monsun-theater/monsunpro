<IfModule mod_rewrite.c>
  <IfModule mod_negotiation.c>
    Options -MultiViews -Indexes
  </IfModule>

  RewriteEngine On
  RewriteBase /

  # --- Static cache (file-style: path_.html, _.html) ---
  # Only for GET, never for live-preview
  RewriteCond %{REQUEST_METHOD} =GET
  RewriteCond %{QUERY_STRING} !live-preview

  # Homepage
  RewriteCond %{REQUEST_FILENAME}static%{REQUEST_URI}_%{QUERY_STRING}\.html -f
  RewriteRule ^ static%{REQUEST_URI}_%{QUERY_STRING}.html [L,T=text/html]
  # --- End static cache ---

  # Trailing slash redirect (optional)
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} (.+)/$
  RewriteRule ^ %1 [L,R=301]

  # Laravel front controller (also skip live-preview)
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{QUERY_STRING} !live-preview
  RewriteRule ^ index.php [L]
</IfModule>